<!DOCTYPE html>
<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script>
// create function PARAMETER = IP, RETURN = CITY


/////MAKE URL WITH IP////

var freegeoip_url = "http://freegeoip.net/json/"; //consider using https! (does it still work?)
var ip = "204.28.125.178";

var url_with_ip = freegeoip_url.concat(ip); //append ip to string
console.log(url_with_ip);

$(document).ready(function(){
    $("button").click(function(){
        $.getJSON(url_with_ip, function(result){

            //console.log(JSON.stringify(result));
            console.log(JSON.stringify(result, undefined, 2)); // format with new lines


            $.each(result, function(i, field){
                //console.log(i); //variable (e.g. "ip", "city")
                //console.log(field); //result (e.g. "204.28.125.178", "San Francisco")

                var city;
                if (i == "city"){
                    city = field;
                    console.log(city);
                }


            });
        });
    });
});
</script>    
    
</head>
<body>
    
<button>Get JSON data</button>


</body>

<script>

xmlhttp = new XMLHttpRequest();
xmlhttp.open("GET","/ip_list.csv",true);
xmlhttp.send(null);
var fileContent = xmlhttp.responseText;
var ipArray = fileContent.split('\n');
console.log(ipArray);
</script>


</html>
